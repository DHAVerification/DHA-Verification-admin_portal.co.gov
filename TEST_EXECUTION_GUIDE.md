# ğŸ¯ LOCAL TEST EXECUTION GUIDE

## What to Do RIGHT NOW

You have your local test environment set up. Here are the 4 ways to test:

---

## ğŸš€ FASTEST TEST (30 Seconds)

### **View the HTML Display**

Simply open this file in any web browser:
```
test-documents-display.html
```

**What You'll See:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚        PERMANENT RESIDENCE PERMIT    â”‚    REFUGEE CERTIFICATE     â”‚
â”‚        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                      â”‚                             â”‚
â”‚  DEPARTMENT OF HOME AFFAIRS          â”‚  DEPARTMENT OF HOME AFFAIRS â”‚
â”‚  PRETORIA 0001                       â”‚  PRETORIA 0001              â”‚
â”‚  ğŸ‡¿ğŸ‡¦                                 â”‚  ğŸ‡¿ğŸ‡¦                         â”‚
â”‚                                      â”‚                             â”‚
â”‚  Applicant: Muhammad Mohsin          â”‚  Applicant: FAATI ABDURAHMANâ”‚
â”‚  Passport: AD0110994 âœ“               â”‚  Passport: PF4E8000026215   â”‚
â”‚  DOB: 23-06-1985                     â”‚  Nationality: SOMALI        â”‚
â”‚  Gender: MALE                        â”‚  Gender: MALE               â”‚
â”‚  Nationality: PAKISTANI              â”‚                             â”‚
â”‚                                      â”‚                             â”‚
â”‚  PERMIT DETAILS                      â”‚  PERMIT DETAILS             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚  Permit #: PRP/5829/2025 JHB         â”‚  Permit #: REF/PTA/2025/10/ â”‚
â”‚  Reference: PRP6296482               â”‚           13001             â”‚
â”‚  Control: A629649                    â”‚  Reference: REF8293847      â”‚
â”‚                                      â”‚  Control: A829384           â”‚
â”‚  VALIDITY                            â”‚  VALIDITY                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  Issue Date: 12-09-2025              â”‚  Issue Date: 13-10-2025     â”‚
â”‚  Status: âœ… VALID                    â”‚  Expiry: 13-10-2029         â”‚
â”‚  Duration: INDEFINITE âœ“              â”‚  Duration: 4-YEAR âœ“         â”‚
â”‚                                      â”‚  Status: âœ… VALID           â”‚
â”‚  OFFICER INFORMATION                 â”‚  OFFICER INFORMATION        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚  Officer: Makhode LT                 â”‚  Officer: M. Patel          â”‚
â”‚  ID: 8BWWWBURUV                      â”‚  ID: DHA-BO-2025-005        â”‚
â”‚  Office: PRETORIA 0001               â”‚  Office: PRETORIA 0001      â”‚
â”‚                                      â”‚                             â”‚
â”‚  [QR CODE SECTION]                   â”‚  [QR CODE SECTION]          â”‚
â”‚                                      â”‚                             â”‚
â”‚  ___________________________          â”‚  ___________________________â”‚
â”‚  Digital Signature                   â”‚  Digital Signature          â”‚
â”‚                                      â”‚                             â”‚
â”‚  âœ… VALID                            â”‚  âœ… VALID                   â”‚
â”‚                                      â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Verify These Details:**
- âœ… Muhammad Mohsin showing
- âœ… Passport AD0110994 visible
- âœ… Permit PRP/5829/2025 JHB shown
- âœ… Status: VALID (Indefinite)
- âœ… FAATI ABDURAHMAN ISA showing
- âœ… Permit REF/PTA/2025/10/13001 shown
- âœ… Status: VALID (4-Year)
- âœ… Both documents side-by-side
- âœ… Official DHA branding applied
- âœ… All details populated

**If All Look Correct:** âœ… Ready to move to server testing!

---

## ğŸ–¥ï¸ START SERVER TEST (3-5 Minutes)

### **Step 1: Start the Server**

```bash
npm start
```

**Expected Output:**
```
âœ… Server running on http://localhost:3000
âœ… All 13 documents loaded
âœ… Ready for API testing
```

### **Step 2: Test in Your Browser**

Open these URLs one by one:

#### Health Check
```
http://localhost:3000/api/health
```
**Expected Response:**
```json
{
  "status": "healthy",
  "uptime": 2.123,
  "permits": 13,
  "timestamp": "2025-11-15T10:30:45Z"
}
```

#### Get All Permits
```
http://localhost:3000/api/permits
```
**Expected Response:**
```json
[
  {
    "id": 1,
    "name": "Muhammad Mohsin",
    "passport": "AD0110994",
    "type": "Permanent Residence",
    "permitNumber": "PRP/5829/2025 JHB",
    "status": "Valid",
    ...
  },
  ... (12 more documents)
]
```

#### Get Muhammad Mohsin PR
```
http://localhost:3000/api/permits/1
```
**Expected Response:**
```json
{
  "id": 1,
  "name": "Muhammad Mohsin",
  "passport": "AD0110994",
  "type": "Permanent Residence",
  "permitNumber": "PRP/5829/2025 JHB",
  "referenceNumber": "PRP6296482",
  "controlNumber": "A629649",
  "issueDate": "2025-09-12",
  "expiryDate": "Indefinite",
  "status": "Issued"
}
```

#### Get FAATI ABDURAHMAN Refugee Certificate
```
http://localhost:3000/api/permits/13
```
**Expected Response:**
```json
{
  "id": 13,
  "name": "FAATI ABDURAHMAN ISA",
  "passport": "PF4E8000026215",
  "type": "Refugee Certificate",
  "permitNumber": "REF/PTA/2025/10/13001",
  "issueDate": "2025-10-13",
  "expiryDate": "2029-10-13",
  "status": "Issued"
}
```

#### Download PR PDF
```
http://localhost:3000/api/permits/1/pdf
```
**Expected:** PDF downloads for Muhammad Mohsin PR

#### Download Refugee PDF
```
http://localhost:3000/api/permits/13/pdf
```
**Expected:** PDF downloads for FAATI ABDURAHMAN Refugee Certificate

**If All Tests Pass:** âœ… Your API is working perfectly!

---

## ğŸ”§ RUN AUTOMATED VERIFICATION (1 Minute)

### **Execute Test Script**

```bash
node verify-local-setup.js
```

**Expected Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    LOCAL TEST VERIFICATION - DHA BACK OFFICE    â•‘
â•‘        âœ… ALL TESTS PASSED                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Check required files
âœ… Verify package.json
âœ… Verify 13 documents loaded
âœ… Verify Muhammad Mohsin (PR)
âœ… Verify FAATI ABDURAHMAN ISA (Refugee)
âœ… Verify HTML display file
âœ… Verify server config
âœ… Verify all 13 documents in system

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              TEST SUMMARY                      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Passed: âœ… 8                                   â•‘
â•‘ Failed: âœ… 0                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ âœ… ALL TESTS PASSED - READY FOR DEPLOYMENT     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**If You See This:** âœ… 100% Ready for Render!

---

## ğŸ“¡ USE CURL TO TEST (Terminal)

### **Without Running Server First**

```bash
# Start server in background
npm start &

# Wait 2 seconds for startup
sleep 2

# Test endpoints
curl http://localhost:3000/api/health
curl http://localhost:3000/api/permits | head -50
curl http://localhost:3000/api/permits/1 | head -30
curl http://localhost:3000/api/permits/13 | head -30

# Download test PDF
curl http://localhost:3000/api/permits/1/pdf --output test-pr.pdf
echo "âœ… PDF saved to test-pr.pdf"
```

---

## âœ… FINAL CHECKLIST

Before moving to Render deployment, verify ALL of these:

### Data Verification
- [ ] Muhammad Mohsin passport: **AD0110994** âœ…
- [ ] Permit: **PRP/5829/2025 JHB** âœ…
- [ ] FAATI ABDURAHMAN ISA passport: **PF4E8000026215** âœ…
- [ ] Refugee permit: **REF/PTA/2025/10/13001** âœ…
- [ ] All 13 documents showing âœ…

### Display Verification
- [ ] HTML display shows both documents âœ…
- [ ] Official DHA branding visible âœ…
- [ ] All fields populated âœ…
- [ ] Verification badges showing âœ…
- [ ] QR sections included âœ…

### API Verification
- [ ] Health endpoint returns 200 âœ…
- [ ] All 13 permits return âœ…
- [ ] PDF generation works âœ…
- [ ] Individual document retrieval works âœ…
- [ ] QR code endpoints working âœ…

### System Verification
- [ ] Server starts without errors âœ…
- [ ] No missing dependencies âœ…
- [ ] Security features enabled âœ…
- [ ] Rate limiting active âœ…
- [ ] CORS protection working âœ…

---

## ğŸ¯ NEXT STEP

Once all tests above PASS âœ…:

### Deploy to Render

**3 Simple Steps (10 minutes):**

1. **Push Code**
   ```bash
   git add .
   git commit -m "Local testing complete - ready for Render"
   git push origin main
   ```

2. **Create Render Service**
   - Visit: https://dashboard.render.com
   - Click: New Web Service
   - Select: Your GitHub repo
   - Runtime: Node.js
   - Build Command: `npm install`
   - Start Command: `npm start`

3. **Your System Goes LIVE** ğŸ‰
   - URL: `https://your-dha-service.onrender.com`
   - Status: LIVE worldwide
   - All endpoints: Active
   - All documents: Available

---

## ğŸ“ SUPPORT

If any test fails:

1. **Check logs:** `npm start` shows detailed errors
2. **Verify files:** `ls -la` shows all required files
3. **Check port:** `lsof -i :3000` shows if port is in use
4. **Restart:** Stop server, kill port, start again

**All systems ready!** Proceed with confidence. âœ…
