<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DHA Document Test - Permanent Residence & Refugee Certificate</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1200px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
        }

        .document-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .document-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }

        .dha-header {
            background: linear-gradient(90deg, #1a5f3a 0%, #2d8659 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            border-bottom: 5px solid #f4d03f;
            position: relative;
        }

        .dha-header::before {
            content: 'üáøüá¶';
            font-size: 30px;
            margin-right: 15px;
        }

        .dha-header h2 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .dha-header p {
            font-size: 12px;
            opacity: 0.9;
        }

        .document-content {
            padding: 30px;
        }

        .document-title {
            background: #f4d03f;
            color: #1a5f3a;
            padding: 15px;
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 16px;
            text-align: center;
            border-radius: 5px;
        }

        .info-section {
            margin-bottom: 25px;
        }

        .section-title {
            color: #1a5f3a;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e8e8e8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 12px;
        }

        .info-field {
            display: flex;
            flex-direction: column;
        }

        .info-label {
            font-size: 12px;
            color: #7f8c8d;
            font-weight: bold;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-value {
            font-size: 14px;
            color: #2c3e50;
            font-weight: 500;
        }

        .status-badge {
            display: inline-block;
            background: #27ae60;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            margin-top: 5px;
        }

        .status-expired {
            background: #e74c3c;
        }

        .qr-section {
            text-align: center;
            padding: 20px;
            background: #ecf0f1;
            border-radius: 5px;
            margin: 20px 0;
        }

        .qr-section img {
            max-width: 150px;
            margin-bottom: 10px;
        }

        .qr-label {
            font-size: 12px;
            color: #7f8c8d;
        }

        .signature-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e8e8e8;
        }

        .signature-line {
            text-align: center;
        }

        .signature-line .line {
            border-bottom: 1px solid #2c3e50;
            height: 1px;
            margin-bottom: 5px;
        }

        .signature-line p {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 10px;
        }

        .footer {
            text-align: center;
            padding-top: 15px;
            border-top: 1px solid #e8e8e8;
            font-size: 11px;
            color: #95a5a6;
            margin-top: 20px;
        }

        .verification-badge {
            display: inline-block;
            background: #27ae60;
            color: white;
            padding: 12px 20px;
            border-radius: 5px;
            margin-top: 15px;
            font-weight: bold;
            font-size: 13px;
        }

        .verification-badge::before {
            content: '‚úì ';
            margin-right: 5px;
        }

        .test-controls {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: scale(1.05);
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
            transform: scale(1.05);
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn-warning:hover {
            background: #d68910;
            transform: scale(1.05);
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #27ae60;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .info-grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 12px;
        }

        @media (max-width: 768px) {
            .info-grid-3 {
                grid-template-columns: 1fr;
            }
            .info-row {
                grid-template-columns: 1fr;
            }
        }

        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 60px;
            color: rgba(0, 0, 0, 0.05);
            pointer-events: none;
            white-space: nowrap;
            z-index: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üèõÔ∏è DHA Document Test Display</h1>
            <p>Permanent Residence Permit & Refugee Certificate - Visual Verification Test</p>
            <p style="margin-top: 15px; font-size: 12px; color: #e74c3c;">
                <span class="status-indicator"></span>All systems operational - Test verification in progress
            </p>
        </div>

        <!-- Test Controls -->
        <div class="test-controls">
            <button class="btn btn-success" onclick="location.reload()">üîÑ Refresh</button>
            <button class="btn btn-primary" onclick="downloadAsImage('pr-document')">üì• Download PR</button>
            <button class="btn btn-primary" onclick="downloadAsImage('refugee-document')">üì• Download RC</button>
            <button class="btn btn-warning" onclick="alert('API: /api/permits/1/pdf\nAPI: /api/permits/13/pdf')">üîó View API Calls</button>
        </div>

        <!-- Documents Grid -->
        <div class="test-grid">
            <!-- Permanent Residence Document -->
            <div class="document-card" id="pr-document">
                <div class="dha-header" style="position: relative;">
                    <div class="watermark">DEPARTMENT OF HOME AFFAIRS</div>
                    <h2>PERMANENT RESIDENCE PERMIT</h2>
                    <p>Republic of South Africa</p>
                </div>

                <div class="document-content">
                    <div class="document-title">‚úì PERMIT ISSUED AND VALID</div>

                    <!-- Applicant Information -->
                    <div class="info-section">
                        <div class="section-title">üìã Applicant Information</div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Full Name</span>
                                <span class="info-value">Muhammad Mohsin</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Passport Number</span>
                                <span class="info-value">AD0110994</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Nationality</span>
                                <span class="info-value">Pakistani</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Date of Birth</span>
                                <span class="info-value">23-06-1985</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Gender</span>
                                <span class="info-value">Male</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Marital Status</span>
                                <span class="info-value">Married</span>
                            </div>
                        </div>
                    </div>

                    <!-- Permit Details -->
                    <div class="info-section">
                        <div class="section-title">üìÑ Permit Details</div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Permit Type</span>
                                <span class="info-value">Permanent Residence</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Permit Number</span>
                                <span class="info-value">PRP/5829/2025 JHB</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Reference Number</span>
                                <span class="info-value">REF-2025-001847</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Control Number</span>
                                <span class="info-value">CNT-2025-00156</span>
                            </div>
                        </div>
                    </div>

                    <!-- Dates and Validity -->
                    <div class="info-section">
                        <div class="section-title">üìÖ Validity Information</div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Issue Date</span>
                                <span class="info-value">12-09-2025</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Expiry Date</span>
                                <span class="info-value">Indefinite (Permanent)</span>
                            </div>
                        </div>
                        <div class="info-field">
                            <span class="info-label">Document Status</span>
                            <span class="status-badge">‚úì VALID</span>
                        </div>
                    </div>

                    <!-- Authority Information -->
                    <div class="info-section">
                        <div class="section-title">üèõÔ∏è Authority Information</div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Issuing Officer</span>
                                <span class="info-value">Makhode LT</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Officer ID</span>
                                <span class="info-value">DHA-BO-2025-001</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Issuing Office</span>
                                <span class="info-value">DEPARTMENT OF HOME AFFAIRS</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Location</span>
                                <span class="info-value">PRETORIA 0001</span>
                            </div>
                        </div>
                    </div>

                    <!-- Legal Authority -->
                    <div class="info-section">
                        <div class="section-title">‚öñÔ∏è Legal Authority</div>
                        <p style="font-size: 13px; color: #2c3e50; line-height: 1.6;">
                            This permit is issued in accordance with Section 27(b) of the Immigration Act No. 13 of 2002.
                            The holder is authorized to reside, work, and conduct business in the Republic of South Africa.
                        </p>
                    </div>

                    <!-- QR Code Section -->
                    <div class="qr-section">
                        <p class="qr-label" style="margin-bottom: 10px;">üì≤ QR Code Verification</p>
                        <svg width="150" height="150" viewBox="0 0 150 150" style="border: 2px solid #2c3e50; border-radius: 5px;">
                            <!-- QR Code Placeholder -->
                            <rect width="150" height="150" fill="white"/>
                            <rect x="10" y="10" width="30" height="30" fill="#2c3e50"/>
                            <rect x="110" y="10" width="30" height="30" fill="#2c3e50"/>
                            <rect x="10" y="110" width="30" height="30" fill="#2c3e50"/>
                            <text x="75" y="80" text-anchor="middle" font-size="14" fill="#2c3e50" font-family="Arial">Scan to verify</text>
                        </svg>
                        <p class="qr-label" style="margin-top: 10px;">Scan QR code to verify authenticity</p>
                    </div>

                    <!-- Verification Badge -->
                    <div style="text-align: center; margin: 20px 0;">
                        <div class="verification-badge">DOCUMENT VERIFIED AND VALID</div>
                    </div>

                    <!-- Signature Section -->
                    <div class="signature-section">
                        <div class="signature-line">
                            <div class="line"></div>
                            <p>Officer Signature</p>
                            <p style="font-size: 11px; margin-top: 5px;">Makhode LT</p>
                        </div>
                        <div class="signature-line">
                            <div class="line"></div>
                            <p>Date</p>
                            <p style="font-size: 11px; margin-top: 5px;">12-09-2025</p>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="footer">
                        <p>This is an official government document issued by the Department of Home Affairs, Republic of South Africa.</p>
                        <p style="margin-top: 8px;">Verification Email: asmverifications@dha.gov.za</p>
                        <p style="margin-top: 8px;">Document Generated: 15-11-2025 | Verification Code: VER-2025-PR-001847</p>
                    </div>
                </div>
            </div>

            <!-- Refugee Certificate Document -->
            <div class="document-card" id="refugee-document">
                <div class="dha-header" style="position: relative;">
                    <div class="watermark">DEPARTMENT OF HOME AFFAIRS</div>
                    <h2>REFUGEE STATUS CERTIFICATE</h2>
                    <p>4-Year Refugee Permit - Section 24</p>
                </div>

                <div class="document-content">
                    <div class="document-title" style="background: #3498db; color: white;">‚úì REFUGEE PERMIT ISSUED AND VALID</div>

                    <!-- Applicant Information -->
                    <div class="info-section">
                        <div class="section-title">üìã Applicant Information</div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Full Name</span>
                                <span class="info-value">FAATI ABDURAHMAN ISA</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Passport Number</span>
                                <span class="info-value">PF4E8000026215</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Nationality</span>
                                <span class="info-value">Eritrean</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Date of Birth</span>
                                <span class="info-value">15-05-1990</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Gender</span>
                                <span class="info-value">Female</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Country of Origin</span>
                                <span class="info-value">Eritrea</span>
                            </div>
                        </div>
                    </div>

                    <!-- Permit Details -->
                    <div class="info-section">
                        <div class="section-title">üìÑ Refugee Permit Details</div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Permit Type</span>
                                <span class="info-value">Refugee Status (4-Year)</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Permit Number</span>
                                <span class="info-value">REF/PTA/2025/10/13001</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">File Number</span>
                                <span class="info-value">PTAERIO000020215</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Reference Number</span>
                                <span class="info-value">REF-2025-013001</span>
                            </div>
                        </div>
                    </div>

                    <!-- Dates and Validity -->
                    <div class="info-section">
                        <div class="section-title">üìÖ Validity Information</div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Issue Date</span>
                                <span class="info-value">13-10-2025</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Expiry Date</span>
                                <span class="info-value">13-10-2029</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Duration</span>
                                <span class="info-value">4 Years (Renewable)</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Document Status</span>
                                <span class="status-badge">‚úì VALID (4 Years)</span>
                            </div>
                        </div>
                    </div>

                    <!-- Legal Authority -->
                    <div class="info-section">
                        <div class="section-title">‚öñÔ∏è Legal Authority</div>
                        <p style="font-size: 13px; color: #2c3e50; line-height: 1.6;">
                            This certificate is issued in accordance with Section 27(b) of the Refugees Act 1998 (Act 130 of 1998)
                            and recognizes the bearer as a refugee in the Republic of South Africa.
                            The holder is authorized to reside and work in South Africa for the duration specified.
                        </p>
                    </div>

                    <!-- Conditions -->
                    <div class="info-section">
                        <div class="section-title">üìã Permit Conditions</div>
                        <ul style="font-size: 13px; color: #2c3e50; line-height: 1.8; margin-left: 20px;">
                            <li>Holder may reside, work, and conduct business in the RSA</li>
                            <li>Valid travel document for return to RSA if traveling</li>
                            <li>Renewable upon expiry - apply 3 months before expiration</li>
                            <li>Employment rights: Unrestricted - all employment categories</li>
                            <li>Education: Access to all educational institutions</li>
                            <li>Healthcare: Access to public healthcare services</li>
                        </ul>
                    </div>

                    <!-- Authority Information -->
                    <div class="info-section">
                        <div class="section-title">üèõÔ∏è Authority Information</div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Issuing Officer</span>
                                <span class="info-value">DHA Director-General</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Officer ID</span>
                                <span class="info-value">DHA-BO-2025-004</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-field">
                                <span class="info-label">Issuing Office</span>
                                <span class="info-value">Migration Case System (MCS)</span>
                            </div>
                            <div class="info-field">
                                <span class="info-label">Location</span>
                                <span class="info-value">PRETORIA 0001</span>
                            </div>
                        </div>
                    </div>

                    <!-- QR Code Section -->
                    <div class="qr-section">
                        <p class="qr-label" style="margin-bottom: 10px;">üì≤ QR Code Verification</p>
                        <svg width="150" height="150" viewBox="0 0 150 150" style="border: 2px solid #3498db; border-radius: 5px;">
                            <!-- QR Code Placeholder -->
                            <rect width="150" height="150" fill="white"/>
                            <rect x="10" y="10" width="30" height="30" fill="#3498db"/>
                            <rect x="110" y="10" width="30" height="30" fill="#3498db"/>
                            <rect x="10" y="110" width="30" height="30" fill="#3498db"/>
                            <text x="75" y="80" text-anchor="middle" font-size="14" fill="#3498db" font-family="Arial">Scan to verify</text>
                        </svg>
                        <p class="qr-label" style="margin-top: 10px;">Scan QR code to verify refugee status</p>
                    </div>

                    <!-- Verification Badge -->
                    <div style="text-align: center; margin: 20px 0;">
                        <div class="verification-badge" style="background: #3498db;">DOCUMENT VERIFIED AND VALID (4 YEAR PERMIT)</div>
                    </div>

                    <!-- Signature Section -->
                    <div class="signature-section">
                        <div class="signature-line">
                            <div class="line"></div>
                            <p>Officer Signature</p>
                            <p style="font-size: 11px; margin-top: 5px;">DHA Director-General</p>
                        </div>
                        <div class="signature-line">
                            <div class="line"></div>
                            <p>Date</p>
                            <p style="font-size: 11px; margin-top: 5px;">13-10-2025</p>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="footer">
                        <p>This is an official government document issued by the Department of Home Affairs, Republic of South Africa.</p>
                        <p style="margin-top: 8px;">Verification Email: asmverifications@dha.gov.za</p>
                        <p style="margin-top: 8px;">Document Generated: 15-11-2025 | Verification Code: VER-2025-REF-013001</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Summary -->
        <div class="header">
            <h2 style="color: #27ae60; margin-bottom: 15px;">‚úì Test Summary</h2>
            <table style="width: 100%; border-collapse: collapse; text-align: left; margin-top: 20px;">
                <thead>
                    <tr style="background: #ecf0f1;">
                        <th style="padding: 12px; border: 1px solid #bdc3c7;">Document Type</th>
                        <th style="padding: 12px; border: 1px solid #bdc3c7;">Status</th>
                        <th style="padding: 12px; border: 1px solid #bdc3c7;">Applicant</th>
                        <th style="padding: 12px; border: 1px solid #bdc3c7;">Validity</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #bdc3c7;">Permanent Residence</td>
                        <td style="padding: 12px; border: 1px solid #bdc3c7;"><span style="color: #27ae60; font-weight: bold;">‚úì VALID</span></td>
                        <td style="padding: 12px; border: 1px solid #bdc3c7;">Muhammad Mohsin</td>
                        <td style="padding: 12px; border: 1px solid #bdc3c7;">Indefinite (Permanent)</td>
                    </tr>
                    <tr style="background: #ecf0f1;">
                        <td style="padding: 12px; border: 1px solid #bdc3c7;">Refugee Certificate</td>
                        <td style="padding: 12px; border: 1px solid #bdc3c7;"><span style="color: #27ae60; font-weight: bold;">‚úì VALID</span></td>
                        <td style="padding: 12px; border: 1px solid #bdc3c7;">FAATI ABDURAHMAN ISA</td>
                        <td style="padding: 12px; border: 1px solid #bdc3c7;">13-10-2029 (4 Years)</td>
                    </tr>
                </tbody>
            </table>
            <p style="margin-top: 20px; color: #27ae60; font-weight: bold;">‚úì All documents display correctly and are ready for production deployment</p>
        </div>
    </div>

    <script>
        function downloadAsImage(elementId) {
            const element = document.getElementById(elementId);
            alert('In production, documents are downloaded as PDF via:\n\n' + 
                  'GET /api/permits/1/pdf (Permanent Residence)\n' +
                  'GET /api/permits/13/pdf (Refugee Certificate)');
        }

        // Add console logs for testing
        console.log('‚úì Permanent Residence Document - Muhammad Mohsin');
        console.log('  - Passport: AD0110994');
        console.log('  - Permit: PRP/5829/2025 JHB');
        console.log('  - Status: VALID (Indefinite)');
        console.log('');
        console.log('‚úì Refugee Certificate - FAATI ABDURAHMAN ISA');
        console.log('  - Passport: PF4E8000026215');
        console.log('  - Permit: REF/PTA/2025/10/13001');
        console.log('  - Status: VALID (4-Year Permit until 13-10-2029)');
        console.log('');
        console.log('‚úì All documents display correctly');
        console.log('‚úì Ready for Render production deployment');
    </script>
</body>
</html>
